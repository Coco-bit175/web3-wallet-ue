<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@latest/lib/index.iife.js"></script>
</head>
<body>
    <button onclick="connectWallet()">Connect Wallet</button>
    <p id="walletAddress">Wallet: Not connected</p>
    <p id="balance">Balance: --</p>

    <script>
    let connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('devnet'));

    async function connectWallet() {
      try {
        const resp = await window.solana.connect();
        const pubKey = resp.publicKey.toString();
        document.getElementById('walletAddress').innerText = "Wallet: " + pubKey;

        const balance = await connection.getBalance(resp.publicKey);
        const solBalance = balance / solanaWeb3.LAMPORTS_PER_SOL;
        document.getElementById('balance').innerText = "Balance: " + solBalance.toFixed(2) + " SOL";

        // Send data to UE using URL redirect format
        window.location.href = "uewallet://address=" + pubKey + "&balance=" + solBalance.toFixed(2);
      } catch (err) {
        alert("Wallet connection failed.");
      }
    }

    window.addEventListener('load', () => {
      if (window.solana && window.solana.isPhantom) {
        console.log("Phantom wallet detected.");
      } else {
        alert("Please install Phantom Wallet extension.");
      }
    });
    </script>
</body>
</html>

